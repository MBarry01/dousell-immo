# ============================================================================
# REDIS/VALKEY CONFIGURATION - Dousell Immo
# ============================================================================
#
# Choisissez l'une des options ci-dessous selon votre environnement :
#
# Option 1 : Vercel (Production Serverless) - Upstash Redis
# Option 2 : Serveur Dédié (Local ou Sénégal) - Valkey/Redis classique
# Option 3 : Dev Local - Docker Valkey
#
# ============================================================================

# ----------------------------------------------------------------------------
# OPTION 1 : UPSTASH REDIS (Vercel - Serverless HTTP)
# ----------------------------------------------------------------------------
#
# Créer un compte gratuit sur https://upstash.com
# Créer une database Redis (région : Europe pour France)
# Copier les credentials depuis le dashboard
#
# Avantages :
# - Pas de connexion TCP (évite cold starts Vercel)
# - Pay-per-request (gratuit jusqu'à 10K requêtes/jour)
# - Edge-compatible (cache au plus près des users)
#
# Installation :
#   npm install @upstash/redis
#
UPSTASH_REDIS_REST_URL=https://your-db-name.upstash.io
UPSTASH_REDIS_REST_TOKEN=AXX...XXX

# ----------------------------------------------------------------------------
# OPTION 2 : VALKEY/REDIS CLASSIQUE (Serveur Dédié)
# ----------------------------------------------------------------------------
#
# Pour serveur dédié au Sénégal (latence ultra-faible)
#
# Installation Linux (Ubuntu/Debian) :
#   sudo apt-get install valkey
#   sudo systemctl start valkey
#
# Ou Docker :
#   docker run -d --name valkey -p 6379:6379 valkey/valkey
#
# Installation package :
#   npm install ioredis
#
# Format URL :
#   redis://[user:password@]host:port[/database]
#
# Exemples :
REDIS_URL=redis://localhost:6379
# REDIS_URL=redis://user:password@dakar-server.com:6379
# REDIS_URL=redis://10.0.0.5:6379/0

# ----------------------------------------------------------------------------
# OPTION 3 : DEV LOCAL (Docker Valkey)
# ----------------------------------------------------------------------------
#
# Recommandé pour développement local
#
# Lancer Valkey :
#   docker run -d --name valkey -p 6379:6379 valkey/valkey
#
# Vérifier :
#   docker logs valkey
#   # Devrait afficher : "Ready to accept connections"
#
# Installer le client :
#   npm install ioredis
#
REDIS_URL=redis://localhost:6379

# ----------------------------------------------------------------------------
# CONFIGURATION AVANCÉE (Optionnel)
# ----------------------------------------------------------------------------

# Activer les logs détaillés (dev only)
REDIS_DEBUG=true

# Préfixe pour toutes les clés (éviter collisions multi-apps)
REDIS_KEY_PREFIX=dousell:

# TTL par défaut (secondes)
REDIS_DEFAULT_TTL=3600

# Max retries si connexion perdue
REDIS_MAX_RETRIES=3

# Timeout commande (ms)
REDIS_COMMAND_TIMEOUT=5000

# ============================================================================
# NOTES IMPORTANTES
# ============================================================================
#
# 1. NE JAMAIS commiter ce fichier avec vos vraies credentials !
#    Copier vers .env.local et ajouter au .gitignore
#
# 2. Tester la connexion :
#    npx tsx scripts/test-redis.ts
#
# 3. Pour production Vercel :
#    - Utiliser UPSTASH_REDIS_REST_* (HTTP, pas TCP)
#    - Ajouter les variables dans Vercel Dashboard (Settings > Environment Variables)
#
# 4. Pour serveur dédié :
#    - Utiliser REDIS_URL (TCP classique)
#    - Configurer firewall pour port 6379 si distant
#    - Activer AUTH si exposé sur internet :
#      REDIS_URL=redis://user:strongpassword@host:6379
#
# 5. Monitoring :
#    - Upstash : Dashboard intégré
#    - Valkey/Redis : redis-cli INFO stats
#
# ============================================================================
