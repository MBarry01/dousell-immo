# Cursor Rules - Dousell Immo

## ğŸ§  Core Philosophy
- **Plan First**: Reformuler le but avant de coder. Use `/plan`.
- **Reuse**: Chercher avant de crÃ©er.
- **Justify**: Expliquer pourquoi une nouvelle solution est nÃ©cessaire.
- **Immutability (CRITICAL)**: Toujours crÃ©er de nouveaux objets, JAMAIS de mutations.

## ğŸ›¡ï¸ Security & Database
- **RLS First**: Toujours penser aux politiques de sÃ©curitÃ© Supabase.
- **Auth**: VÃ©rifier les rÃ´les via `lib/permissions.ts`.
- **Secrets**: Jamais de clÃ©s en dur.
- **Input Validation**: Utiliser Zod pour CHAQUE entrÃ©e systÃ¨me.

## ğŸ‘¥ Team-Awareness
- **Lease/Contract**: VÃ©rifier `team_id` pour la propriÃ©tÃ©.
- **Branding**: Utiliser le branding de l'Ã©quipe (Luxe/Gold).

## ğŸ“± Mobile & Performance
- **A11y**: Lecteurs d'Ã©cran, contrastes 4.5:1, zones de toucher 44dp+.
- **UX**: Mobile First (dvh, flex-col), Wording FranÃ§ais.

## ğŸ—ï¸ Architecture
- **Many Small Files**: PrivilÃ©gier beaucoup de petits fichiers (<400 lignes) Ã  quelques gros.
- **Error Handling**: Async/await avec try-catch systÃ©matique.
- **Discovery**: Mapper la stack et les chemins critiques avant audit.

## ğŸ› ï¸ Commands
- **New Commands**: Utilisez `/plan`, `/tdd`, `/verify`, `/learn`.
- **Legacy**: `npm run build`, `npm run lint`.

## âœ… Quality Checklist
- [ ] Functions are small (<50 lines)
- [ ] No deep nesting (>4 levels)
- [ ] No `console.log` in production
- [ ] Proper error handling with user-friendly messages